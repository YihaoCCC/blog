---
title: "ğŸŒˆå‰ç«¯åŠ¨æ€æ›´æ”¹ä¸»é¢˜è‰²"
date: 2022-09-18 19:03:00
updated: 2023-07-10 16:06:06
tags: [Css, JavaScript, å‰ç«¯]
categories: å‰ç«¯æ ·å¼
keywords:
description:
top_img: https://yh-blog.oss-cn-beijing.aliyuncs.com/image-20230710172248273.png
comments:
cover: https://yh-blog.oss-cn-beijing.aliyuncs.com/image-20230710172248273.png
toc:
toc_number:
toc_style_simple:
copyright:
copyright_author:
copyright_author_href:
copyright_url:
copyright_info:
mathjax:
katex:
aplayer:
highlight_shrink:
aside:

---

### æ€»æ˜¯å¥½å¥‡ä¸»é¢˜é¢œè‰²æ€ä¹ˆæ›´æ¢ï¼Ÿä»Šå¤©æŠ½æ—¶é—´è§£å†³ä¸€ä¸‹é—®é¢˜
`:root` ä¼ªç±»åŠcsså£°æ˜å˜é‡

> :rooté€‰æ‹©å™¨ç”¨åŒ¹é…æ–‡æ¡£çš„æ ¹å…ƒç´ ï¼Œåœ¨HTMLä¸­æ ¹å…ƒç´ å§‹ç»ˆæ˜¯HTMLå…ƒç´ ã€‚ä½†æ˜¯:rootçš„æƒé‡é«˜äºhtml


å£°æ˜csså˜é‡ï¼Œä¸€èˆ¬å£°æ˜åœ¨:rootæ ¹å…ƒç´ ä¸Šï¼Œè¿™æ ·æ–‡æ¡£å…¨å±€éƒ½å¯ä»¥å–åˆ°

> å£°æ˜çš„å˜é‡åä»¥--å¼€å¤´æ¯”å¦‚      --text-color
> åœ¨å…¶ä»–cssæ ·å¼ä¸­å¼•ç”¨å˜é‡ç”¨    var(--text-color)


:::danger
ç›¸åŒçš„csså˜é‡ï¼Œå­çº§ä¼šè¦†ç›–:rootçº§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æŸä¸ªå…ƒç´ å–csså˜é‡æ—¶ï¼Œä¼šæ‰¾æœ€è¿‘çš„å£°æ˜å˜é‡çš„å…ƒç´ 
:::

```javascript
getPropertyValue //è·å–å…ƒç´ çš„æŸä¸ªcsså±æ€§å€¼
setProPerty  //è®¾ç½®å…ƒç´ çš„csså±æ€§
removeProperty  //ç§»é™¤å…ƒç´ çš„csså±æ€§

//ä¾‹å¦‚ï¼š
document.documentElement.style.getPropertyValue('font-size') //è·å–å­—ä½“å¤§å°js
document.documentElement.style.getPropertyValue('--font-size') //ä¹Ÿå¯ä»¥æ˜¯csså˜é‡
//è¿™ç§æ–¹å¼åªèƒ½è·å¾—å†…è”æ ·å¼ï¼Œå¦‚æœæ— å†…è”æ ·å¼åˆ™è·å–åˆ°çš„å€¼ä¸ºç©ºï¼Œ
//ä¸document.documentElement.style.fontSizeç›¸åŒï¼Œéƒ½æ˜¯åªèƒ½è·å–å†…è”æ ·å¼å±æ€§å€¼

getComputedStyleï¼ˆnodeï¼‰ //æ­¤æ–¹æ³•è·å–å…ƒç´ çš„æ‰€æœ‰æ ·å¼è¡¨ï¼Œæ˜¯ä¸€ä¸ªå¤§å¯¹è±¡

//å¦‚æœgetPropertyValueæ–¹æ³•ç”¨åœ¨æ­¤å¤„åˆ™å¯ä»¥è·å–åˆ°å…ƒç´ çš„çœŸå®æ ·å¼
//ï¼ˆå³å“ªä¸ªæ ·å¼çš„æƒé‡é«˜ï¼Œç”Ÿæ•ˆçš„æ ·å¼ï¼Œè·å–çš„å°±æ˜¯é‚£ä¸ªå€¼ï¼‰
getComputedStyle(document.documentElement).getPropertyValue()

```
## æ–¹å¼ä¸€ï¼šé€šè¿‡åå…­è¿›åˆ¶é¢œè‰²æ¥æ›´æ”¹rootä¸­å˜é‡çš„å€¼
### å…·ä½“ä»£ç 
```vue
<!-- doméƒ¨åˆ† -->
<div class="color">
  	<span>æ›´æ¢ä¸»é¢˜è‰²</span>
    <input ref="colorInput" :value="defaultColor" @change="changeColor" type="color"/>
</div>

// scriptéƒ¨åˆ†
import { ref, onMounted } from 'vue';
// è·å–å…¨å±€ï¼šrootå¯¹è±¡
const rootColor:any = document.querySelector(':root')
const defaultColor = ref()

// å½“inputå€¼æ”¹å˜æ—¶ï¼Œå¯¹ï¼šrootå±æ€§è¿›è¡Œæ›´æ”¹
const changeColor = (e:any) => {
    console.log(e.target.value);
    rootColor.style.setProperty('--main-color', e.target.value)
}

// æ­¤å¤„å¯é€šè¿‡document.querySelector(':root')æˆ– document.documentElementè·å–åˆå§‹å€¼
onMounted(() => {
    defaultColor.value = getComputedStyle(rootColor).getPropertyValue('--main-color')
    console.log(defaultColor.value);
})
```
## æ–¹å¼äºŒï¼šä¸¤å¥—rooté€šè¿‡ document.dataset.themeåˆ‡æ¢
è¿™ä¸ªæ–¹æ¡ˆè·Ÿæ–¹æ¡ˆä¸€çš„æ€è·¯æ˜¯ç›¸ä¼¼çš„ï¼ŒåŒºåˆ«æ˜¯ä½¿ç”¨äº† [csså˜é‡](https://link.segmentfault.com/?enc=K3vsdO0U3nj8OSxfcBB0Yg%3D%3D.xiisUXrfTNqcR6DCZisA1v14lKoQ9WDrjuQqAj00A5lbg8YzfSrwQDO9q54kUUe%2FFkrAXaP6QO%2Bu1EgGIIAxJO%2BBzdAA%2FQHsk1I7xD9sV%2BA%3D) æ¥å®šä¹‰ä¸»é¢˜è‰²ã€‚

é¦–å…ˆè¦åœ¨é¡µé¢çš„æ ¹å…ƒç´ ä¸Šå®šä¹‰ä¸€ä¸ª dataset: <html lang="en" data-theme="theme1">ã€‚
:::danger
index.htmlä¸­ä¸è®¾ç½®ä¹Ÿå¯ä»¥ï¼
:::
ç„¶åå®šä¹‰ä¸åŒä¸»é¢˜çš„å˜é‡å€¼ï¼š
### 1ã€é¦–å…ˆå®šä¹‰ä¸¤å¥—root æ³¨æ„è¦ä¸åŒçš„rootåšåŒºåˆ†
```css
:root {
  --main-color:#c026d3;
  --theme-background: #18181b;
  --theme-font-color: #71717a;
  --theme-icon-color: #71717a;
  --theme-font-deeper: #fff;
  --theme-rightContent-color: rgba(71,71,71, 0.063);
  --theme-rightContent-boxShadow: rgba(150, 150, 150, 0.3) 0px 0px 30px;
  --theme-rightContent-border: 2px rgba(255,255,255,0.4) solid;
  --theme-active-color: #fff;
  --color-active-background: #c026d3;
  --root-light-color: #213547;
  --root-dark-color: #666;
}
:root[data-theme=light] {
  --theme-background: #fff;
  --theme-font-color: #222629;
  --theme-font-deeper: #18181b;
  --theme-icon-color: rgb(186, 186, 186);
  --theme-active-color: rgb(53, 52, 52);
  --theme-rightContent-color: #f8f8f8;
  --theme-rightContent-boxShadow: rgba(114, 114, 114, 0.603) 0px 0px 30px;
  --theme-rightContent-border: 2px rgba(127, 127, 127, 0.384) solid;
}

```
### 2ã€ä¸ºé€‰æ‹©æ¡†æ·»åŠ æ–¹æ³•
ç›´æ¥åœ¨æ–¹æ³•ä¸­å¯¹documentå…ƒç´ çš„dataset.themeå±æ€§è¿›è¡Œæ›´æ”¹ï¼Œ
å¯ä»¥ç†è§£ä¸ºç›´æ¥ä¸ºjsä¸­çš„æŸä¸ªå¯¹è±¡å¢åŠ å±æ€§ï¼Œç›´æ¥ `å¯¹è±¡ .` å³å¯

```vue
<!-- domç»“æ„ -->
<input @change="changeTheme" v-model="theme" type="checkbox" class="dn" id="dn">

// script
  const changeTheme = () => {
    const doc = document.documentElement
    const themeColor = theme.value ? 'light' : 'default'
    doc.dataset.theme = themeColor
    console.log(theme.value);
}

```
### 3ã€åœ¨æ‰€æœ‰ç”¨åˆ°é¢œè‰²çš„åœ°æ–¹ä½¿ç”¨å˜é‡å³å¯
## å°½é‡éƒ½ç”¨å…¨å±€çš„å˜é‡ï¼Œè¿™æ ·æ¯”è¾ƒå¥½çœ‹
![theme.gif](https://cdn.nlark.com/yuque/0/2022/gif/32628558/1663498119328-b87b1689-c267-4c10-96c0-75e8436ef53f.gif#clientId=u038caf7d-4198-4&errorMessage=unknown%20error&from=ui&id=u9758a96d&originHeight=1382&originWidth=2557&originalType=binary&ratio=1&rotation=0&showTitle=false&size=9985143&status=error&style=none&taskId=u32579ff7-798e-4347-b58a-c692b2d3f48&title=)

---

### æ€»ç»“
```javascript
1.document.querySelector(':root') === document.documentElement   true
2.ä¼˜å…ˆçº§ï¼š jsè®¾ç½®å€¼>å†…è”æ ·å¼>:rooté€‰æ‹©å™¨>htmlé€‰æ‹©å™¨
3.document.documentElement.style.getPropertyValue                åªèƒ½è·å–å†…è”æ ·å¼çš„å€¼
4.getComputedStyle(document.documentElement).getPropertyValue    è·å–åˆ°çš„å§‹ç»ˆæ˜¯å®é™…çš„å€¼

```
